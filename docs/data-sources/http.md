---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "healthcheck_http Data Source - terraform-provider-healthcheck"
subcategory: ""
description: |-
  Returns result for requests performed on a set on related http endpoints
---

# healthcheck_http (Data Source)

Returns result for requests performed on a set on related http endpoints

## Example Usage

```terraform
data "healthcheck_http" "alertmanager" {
    server_auth = {
        ca_cert = file("my_ca.crt")
        override_server_name = "alertmanager.ferlab.lan"
    }
    client_auth = {
        cert_auth = {
            cert =  file("my_client.crt")
            key = file("my_client.key")
        }
    }
    path = "/-/healthy"
    status_codes = [200]
    endpoints = [
        {
            name = "alertmanager-1"
            address = "192.168.10.10"
            port = 9093
        },
        {
            name = "alertmanager-2"
            address = "192.168.10.11"
            port = 9093
        }
    ]
}

data "healthcheck_filter" "alertmanager" {
    up = data.healthcheck_tcp.alertmanager.up
    down = data.healthcheck_tcp.alertmanager.down
}

module "alertmanager_domain" {
  source = "git::https://github.com/Ferlab-Ste-Justine/terraform-etcd-zonefile.git"
  domain = "alertmanager.ferlab.lan"
  key_prefix = "/ferlab/coredns/"
  dns_server_name = "ns.ferlab.lan."
  a_records = [for endpoint in data.healthcheck_filter.alertmanager.endpoints: {
      prefix = "available"
      ip = endpoint.address
  }],
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `endpoints` (Attributes List) List of endpoints to perform request check on (see [below for nested schema](#nestedatt--endpoints))
- `path` (String) Http path to use in the request url for all endpoints
- `status_codes` (List of Number) List of accepted status code that mark a successful request

### Optional

- `client_auth` (Attributes) (see [below for nested schema](#nestedatt--client_auth))
- `maintenance` (Attributes List) Optional list of endpoints that are under maintenance. Those endpoints will not be polled or included in the results (see [below for nested schema](#nestedatt--maintenance))
- `retries` (Number) Number of retries to perform on a particular endpoint with a failing request before determining that it is unavailable
- `server_auth` (Attributes) (see [below for nested schema](#nestedatt--server_auth))
- `timeout` (String) Timeout after which a request attempt on an endpoint will be aborted
- `tls` (Boolean) Whether a tls connection should be attempted

### Read-Only

- `down` (Attributes List) List of endpoints that couldn't be successfully requested to (see [below for nested schema](#nestedatt--down))
- `up` (Attributes List) List of endpoints on which a successful request was performed (see [below for nested schema](#nestedatt--up))

<a id="nestedatt--endpoints"></a>
### Nested Schema for `endpoints`

Required:

- `address` (String) Address the endpoint is listening on
- `port` (Number) Port the endpoint is listening on

Optional:

- `name` (String) Optional name to provide for the endpoint


<a id="nestedatt--client_auth"></a>
### Nested Schema for `client_auth`

Optional:

- `cert_auth` (Attributes) Parameters to perform client certificate authentication during the connection (see [below for nested schema](#nestedatt--client_auth--cert_auth))
- `password_auth` (Attributes) Parameters to perform http basic auth authentication during the request (see [below for nested schema](#nestedatt--client_auth--password_auth))

<a id="nestedatt--client_auth--cert_auth"></a>
### Nested Schema for `client_auth.cert_auth`

Required:

- `cert` (String) Public certificate to use to authentify the client
- `key` (String, Sensitive) Private key to use to authentify the client


<a id="nestedatt--client_auth--password_auth"></a>
### Nested Schema for `client_auth.password_auth`

Required:

- `password` (String, Sensitive) Password to provide to the server
- `username` (String) Username to provide to the server



<a id="nestedatt--maintenance"></a>
### Nested Schema for `maintenance`

Optional:

- `address` (String) If provided, endpoint to exclude will be matched by the provided address (in addition to the 'port' field). In such cases, the 'name' field should not be provided
- `name` (String) If provided, endpoint to exclude will be matched by name. In such cases, the 'address' and 'port' fields should not be provided
- `port` (Number) If provided, endpoint to exclude will be matched by the provided port (in addition to the 'address' field). In such cases, the 'name' field should not be provided


<a id="nestedatt--server_auth"></a>
### Nested Schema for `server_auth`

Required:

- `ca_cert` (String) In the case of a tls connection, a CA certificate to check the validity of the server endpoints

Optional:

- `override_server_name` (String) An alternate name to use instead of the passed endpoints address when validating the endpoints' server certificate


<a id="nestedatt--down"></a>
### Nested Schema for `down`

Read-Only:

- `address` (String) Address of the endpoint, corresponding to the entry passed to the 'endpoints' argument
- `error` (String) Error message that was returned during the last request attempt
- `name` (String) Name of the endpoint, corresponding to the entry passed to the 'endpoints' argument
- `port` (Number) Port of the endpoint, corresponding to the entry passed to the 'endpoints' argument


<a id="nestedatt--up"></a>
### Nested Schema for `up`

Read-Only:

- `address` (String) Address of the endpoint, corresponding to the entry passed to the 'endpoints' argument
- `name` (String) Name of the endpoint, corresponding to the entry passed to the 'endpoints' argument
- `port` (Number) Port of the endpoint, corresponding to the entry passed to the 'endpoints' argument
